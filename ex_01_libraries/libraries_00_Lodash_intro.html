<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Lodash Demo</title>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.4/lodash.min.js"></script>
  </head>
  <body>
  </body>

  <script>
	// Lodash is nice because:
		// It allows to store complex functions in a var.

	// Times: a method to do a function n ammount of times 
		randNumber = () => {
			return Math.round(Math.random() * 100);
		}

			// To call the library you use an underscore
		// The "times(n, function)" function in the Lodash lib will call the function n ammount of times.
		const sampleNumbers = _.times(5, randNumber);
		
		// this will return 5 random numbers:
		console.log(sampleNumbers);

	// filter: filters content
		const players = [
			{ name: 'Bregman, A',  battingAverage: 0.284 },
			{ name: 'Altuve, J',   battingAverage: 0.346 },
			{ name: 'Springer, G', battingAverage: 0.283 },
			{ name: 'Gurriel, Y',  battingAverage: 0.299 },
			{ name: 'Gonzalez, M', battingAverage: 0.303 }
		];
		// Let's say we want the people that are over .300
		// It is kind of like a for loop, the first input is the collection, and then we get the element we want to return from in there.
		const over300 = _.filter(players, player => {
			// Filter will look for conditionals, so it will work with <, >, ==, !=...
			return player.battingAverage > 0.300;
		});

		console.log(over300);

	// !! important !! -> keyby: returns an object composed of keys generated from iterating the values of each key.
		
	// In this roster we have different values per line, but the name of the key is the same, this could be a problem.
		const roster = [
		{ position: '3B', name: 'Bregman, A' },
		{ position: '2B', name: 'Altuve, J' },
		{ position: 'CF', name: 'Springer, G' },
		{ position: '1B', name: 'Gurriel, Y' },
		{ position: 'LF', name: 'Gonzalez, M' }
		]

		// After running Keyby(collection, specified_key) I it will return the content of the specified key as keys themselves
		const keyed_positions = _.keyBy(roster, 'position');

		// Now we will have an object that has the content of the key "position" as keys.
		console.log(keyed_positions);

	// reduce: handy when you need to run a calculation on a collection or dynamically create a collection.

		// It takes an array and a function that takes 3 parameters: the control value, the next value and the starting value.
		const sum = _.reduce([1, 2, 3], function(total, num) {
			return total + num;
		}, 0);
		// This will return the sum of that = 6.

		// Another example: gather all the home runs of a team:
		const homerunStats = [
			{ name: 'Bregman, A',  hr: 19 },
			{ name: 'Altuve, J',   hr: 24 },
			{ name: 'Springer, G', hr: 34 },
			{ name: 'Gurriel, Y',  hr: 18 },
			{ name: 'Gonzalez, M', hr: 23 }
		];

		const totalHomeruns = _.reduce(homerunStats, function(total, player) {
		return total + player.hr;
		}, 0);

		// Yet another example: a View Helper, it takes links and creates <a> tags.
			const links = [
		"https://google.com",
		"https://devcamp.com",
		"https://airbnb.com"
		];

		const webLinks = _.reduce(links, function(content, link) {
		return `<a href='${link}'>${link}</a><br>`.concat(content);
		}, '');	
	
	// random: it creates random numbers
	 // random
	 lodashRandNumber = () => {
      return _.random(1, 100);
    }

    const lodashSampleNumbers = _.times(5, lodashRandNumber);

    console.log(lodashSampleNumbers);

  </script>
</html>